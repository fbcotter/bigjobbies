{% extends "_layout/default.html" %}

{% block head %}
<meta http-equiv="refresh" content="15">
{% endblock %}

{% block content %}

{% if running_jobs %}
<h1>Running jobs</h1>
<table class="striped">
  <thead>
    <th>Number</th>
    <th>Queue</th>
    <th>Start time</th>
    <th>Owner</th>
  </thead>
  <tbody>
{% for job in running_jobs %}
  <td>{{ job.number }}</td>
  <td>{{ job.queue }}</td>
  <td>{{ job.start_time }}</td>
  <td>{{ job.owner }}</td>
{% endfor %}
  </tbody>
</table>
{% endif %}

<h1>Job queue</h1>

<table class="striped">
  <thead>
    <th>Number</th>
    <th>State</th>
    <th>Submission time</th>
    <th>Owner</th>
    <th></th>
  </thead>
  <tbody>
    {% for job in jobs|sort(attribute='sub_time', reverse=True) %}
      <tr>
        <td>{{ job.number }}</td>
        <td>{{ job.state }}</td>
        <td>{{ job.sub_time }}</td>
        <td>{{ job.owner }}</td>
        <td>
          {% if job.has_log %}
          <a href="{{ url_for('log', job_number=job.number) }}">Log</a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

